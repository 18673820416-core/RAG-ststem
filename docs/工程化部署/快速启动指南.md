# 🚀 双服务器架构快速启动指南

## 📦 一句话总结
> **两个服务器，一个常驻（10808），一个按需（5000），完美分工！**

---

## 🎯 1分钟上手

### 第1步：启动静态服务器（仅需一次）
双击运行：
```
启动静态服务器.bat
```

或者命令行：
```bash
python static_server.py
```

**看到这个输出就成功了**：
```
============================================================
RAG系统静态Web服务器
============================================================
📡 访问地址: http://localhost:10808
🎯 功能: 启动控制 + 静态页面托管
💡 提示: 打开浏览器访问上述地址即可使用
============================================================
```

### 第2步：浏览器访问启动页面
```
http://localhost:10808
```

### 第3步：填写信息 + 点击"启动系统"
- 输入用户名（2-20字符）
- 输入密码（8位数字）
- 选择模式（多智能体聊天室 / 基类智能体）
- 点击"🚀 启动系统"按钮

**系统自动完成**：
1. ✅ 启动RAG主服务器（5000端口）
2. ✅ 轮询检查服务器状态
3. ✅ 自动跳转到聊天室页面

**预计启动时间**：5-10秒

---

## 🔥 开发调试场景

### 场景：修改代码后需要重启RAG服务器

**方式1：浏览器重启（最快）**
1. 修改代码
2. 浏览器刷新 `http://localhost:10808`
3. 点击"启动系统"
4. ✅ 完成！

**方式2：命令行重启（适合看日志）**
1. 修改代码
2. Ctrl+C 停止 RAG服务器（不停止静态服务器）
3. 双击 `调试RAG主服务器.bat`
4. ✅ 完成！

---

## 📊 架构示意图

```
┌─────────────────────┐
│  静态服务器 (10808)  │  ← 常驻运行，永不关闭
│  - start.html        │
│  - 启动控制API       │
└──────────┬──────────┘
           │ 控制启动
           ↓
┌─────────────────────┐
│  RAG主服务器 (5000)  │  ← 按需启动，可重启
│  - 多智能体聊天室    │
│  - 向量数据库        │
│  - 认知引擎          │
└─────────────────────┘
```

---

## 🎓 核心优势

| 功能 | 传统单服务器 | 双服务器架构 |
|-----|------------|------------|
| 重启RAG服务器 | Ctrl+C → 重新运行命令 | 浏览器刷新 → 点击启动 |
| 调试效率 | ⭐⭐ | ⭐⭐⭐⭐⭐ |
| 启动速度 | 10秒（每次） | 静态服务器<1秒，RAG服务器5-10秒 |
| 资源占用 | 高（总是加载所有） | 低（静态服务器~10MB） |

---

## 🚨 常见问题

### Q: 静态服务器需要一直运行吗？
**A**: 推荐常驻运行，但关闭后下次使用前需要重新启动。

### Q: 如何停止RAG主服务器？
**A**: 在RAG服务器的命令行窗口按 Ctrl+C 即可。

### Q: 启动失败怎么办？
**A**: 检查：
1. 虚拟环境 `myenv_stable` 是否存在
2. 端口 10808 和 5000 是否被占用
3. 查看日志 `logs/system_errors.log`

---

## 📝 文件清单

| 文件 | 用途 |
|-----|------|
| `static_server.py` | 静态服务器主程序 |
| `rag_main_server.py` | RAG主服务器主程序 |
| `启动静态服务器.bat` | 静态服务器启动脚本 |
| `调试RAG主服务器.bat` | RAG服务器调试脚本 |
| `start.html` | 启动控制页面 |
| `双服务器架构使用说明.md` | 详细架构文档 |

---

## 🎉 开始使用

1. **双击** `启动静态服务器.bat`
2. **浏览器打开** `http://localhost:10808`
3. **点击** "启动系统"
4. **完成** ✅

就是这么简单！

---

**祝您使用愉快！** 🎊

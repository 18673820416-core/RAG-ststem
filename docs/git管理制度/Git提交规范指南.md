# 📋 Git提交规范指南

## 🎯 提交原则

### 1. 原子性原则
- 每个提交应该只包含一个逻辑变更
- 避免混合不相关的修改
- 保持提交的可读性和可回滚性

### 2. 完整性原则
- 确保提交的功能是可运行的
- 包含必要的文档更新
- 避免提交半成品的代码

### 3. 描述性原则
- 提交信息要清晰、准确、有意义
- 使用中文描述，便于团队理解
- 包含变更的原因和影响

## 📁 文件分类与提交策略

### 🔴 **必须提交的文件**
```
✅ 源代码文件 (*.py, *.js, *.html, *.css)
✅ 配置文件 (*.json, *.yaml, *.yml, *.toml)
✅ 文档文件 (*.md, *.txt)
✅ 测试文件 (test_*.py, *_test.py)
✅ 依赖文件 (requirements.txt, package.json)
✅ 重要脚本 (*.sh, *.bat)
```

### 🟡 **谨慎提交的文件**
```
⚠️ 大型数据文件（>10MB）
⚠️ 模型文件（*.safetensors, *.bin）
⚠️ 临时生成的文件
⚠️ 日志文件（除非特殊需要）
```

### ❌ **禁止提交的文件**
```
❌ 敏感信息（API密钥、密码、令牌）
❌ 个人配置文件（IDE配置）
❌ 临时文件（*.tmp, *.temp, *.log）
❌ 虚拟环境目录（myenv_stable/）
❌ 缓存文件（__pycache__/）
❌ 下载的模型文件（data/model_cache/）
```

## 🏷️ 提交类型规范

### 提交前缀标签
```
🐛 fix:      修复bug
✨ feat:     新增功能
📝 docs:     文档更新
🎨 style:    代码格式调整
♻️ refactor: 代码重构
⚡️ perf:     性能优化
🔧 config:   配置变更
🧪 test:     测试相关
🚀 deploy:   部署相关
🔒 security: 安全修复
```

### 提交信息格式
```
<类型>: <简短描述>

<详细描述（可选）>

<相关issue或任务ID（可选）>
```

### 示例
```
🐛 fix: 修复网状思维引擎节点删除错误

- 修复了'node_701b456b'错误
- 改进了删除逻辑的错误处理
- 添加了详细的调试日志

相关: #修复网状思维引擎错误
```

## 📋 提交时机指南

### 🟢 **立即提交的情况**
- 修复了关键bug
- 完成了一个功能模块
- 解决了系统崩溃问题
- 更新了重要文档

### 🟡 **稍后提交的情况**
- 正在进行中的功能开发
- 临时性的调试代码
- 实验性的修改

### 🔴 **避免提交的情况**
- 代码无法正常运行
- 包含敏感信息
- 大量混合不相关的修改
- 临时性的测试文件

## 🔄 工作流建议

### 1. 功能开发工作流
```bash
# 1. 创建功能分支
git checkout -b feature/新功能名称

# 2. 开发过程中的小步提交
git add src/新功能.py
git commit -m "✨ feat: 添加新功能的基础实现"

# 3. 完成开发后的整理提交
git add .
git commit -m "✨ feat: 完成新功能开发"

# 4. 推送到远程分支
git push origin feature/新功能名称
```

### 2. Bug修复工作流
```bash
# 1. 创建修复分支
git checkout -b fix/bug描述

# 2. 修复并测试
git add src/bug文件.py
git commit -m "🐛 fix: 修复XXX错误"

# 3. 推送到远程
git push origin fix/bug描述
```

### 3. 文档更新工作流
```bash
# 直接提交到main分支
git add docs/
git commit -m "📝 docs: 更新XXX文档"
git push origin main
```

## ⚠️ 提交前检查清单

### ✅ 代码检查
- [ ] 代码可以正常运行
- [ ] 没有语法错误
- [ ] 通过了基本测试
- [ ] 没有调试代码残留

### ✅ 安全检查
- [ ] 没有硬编码的敏感信息
- [ ] 配置文件正确
- [ ] 日志文件被忽略
- [ ] 临时文件被清理

### ✅ 提交信息检查
- [ ] 使用了正确的类型标签
- [ ] 描述清晰准确
- [ ] 包含了必要的详细信息
- [ ] 关联了相关任务或issue

## 🚀 最佳实践建议

1. **频繁提交**：小而频繁的提交比大而稀少的提交更好
2. **有意义的提交信息**：让其他人能够理解你的变更
3. **测试后再提交**：确保提交不会破坏现有功能
4. **保持main分支稳定**：main分支应该始终是可部署的
5. **使用分支开发**：新功能应该在单独的分支上开发
6. **定期同步**：经常拉取远程更新，避免冲突

## 📊 提交统计

建议定期查看提交统计，了解项目进展：
```bash
# 查看提交统计
git shortlog -sn

# 查看最近活动
git log --pretty=format:"%h - %an, %ar : %s" -10

# 查看文件变更统计
git diff --stat HEAD~10..HEAD
```
# RAG系统 - 基于统一记忆的智能体框架

## 📋 核心概念定义

### 🔍 事件维度（Event Dimension）
- **性质**：具体、微观、操作性
- **来源**：源于具体事件的完整逻辑链  
- **应用**：分片机制的基础维度，用于文本分割和检索优化
- **特点**：基于特定事件的原因、过程、结果，更细粒度的处理单元

### 🌟 主题维度（Theme Dimension）
- **性质**：抽象、宏观、归纳性
- **来源**：源于语义归纳和提炼
- **应用**：知识图谱的索引维度，用于语义归纳
- **特点**：纯粹的语义提炼维度，可能包含多个事件切片

### 🎯 核心区别
- **事件维度**：具体事件的逻辑链 → 分片机制
- **主题维度**：语义归纳提炼 → 知识图谱索引

## 项目概述

RAG系统是一个基于统一记忆系统的智能体框架，实现了从数据收集、智能切片、记忆存储到知识检索的完整流程。系统采用模块化设计，支持多种认知引擎集成，具备强大的记忆管理和知识发现能力。

## 🚀 先进特性

### 1. 二次分片工具 (Secondary Sharding Tool)
- **智能内容分片**：基于逻辑边界和事件维度的智能文本切片
- **切片流程**：
  - **逻辑链分片（第一次切片）**：基于逻辑边界字符（句号、问号、段落等）进行第一次切片
  - **事件维度分片（第二次切片）**：对逻辑链切片进行基于事件的二次细分（可选）
  - **质量过滤**：基于semantic_quality阈值过滤低质量切片
- **技术优势**：相比纯语义切片，避免了逻辑链不完整导致的上下文断裂问题

## 系统工作流程

### 1. 数据收集阶段
```python
# 使用DataCollector收集数据
data_collector = DataCollector()
data = data_collector.collect_from_files(file_paths)
```

### 2. 智能切片阶段
```python
# 使用MemorySlicerTool进行基于逻辑链完整性的切片
slicer = MemorySlicerTool()
# 第一阶段：基于逻辑链完整性的切片
primary_slices = slicer.slice_by_logic_chain(text_content)
# 第二阶段：基于事件维度的二次细分
final_slices = slicer.slice_by_event_dimension(primary_slices)
```

### 2. 知识图谱自动构建体系 (Knowledge Graph Auto-Construction)
- **自动化实体识别**：智能识别文本中的关键概念和关系
- **动态关系抽取**：基于上下文自动构建概念间的关联
- **图谱自进化**：随着新知识的加入自动更新和优化图谱结构

### 3. 八爪鱼进化驱动构架 (Octopus Evolution Architecture)
- **多臂协同**：多个智能体臂协同工作，各司其职
- **动态任务分配**：根据任务复杂度智能分配处理资源
- **自我优化机制**：通过反馈循环不断优化处理策略
- **智能体动态扩展**：支持从现有智能体模板动态创建临时智能体，实现八爪鱼腕足的动态扩展
  - **临时智能体创建**：基于现有智能体模板快速创建临时智能体
  - **生命周期管理**：支持临时智能体的创建、移除和批量清理
  - **状态标记**：临时智能体有明确的状态标记，便于管理和监控
  - **资源优化**：动态创建和销毁智能体，避免资源浪费

### 4. 智能体模版化配置 (Agent Template Configuration)
- **即插即用模板**：预定义多种智能体角色模板
- **配置可视化**：图形化界面配置智能体行为参数
- **一键部署**：快速创建和部署定制化智能体

## 🏗️ 系统架构

### 核心模块

#### 统一记忆系统 (Unified Memory System)
```python
# 记忆类型枚举
MemoryType = Enum('MemoryType', [
    'WORK_LOG',      # 工作日志
    'CONVERSATION',  # 对话记忆
    'TOOL_USAGE',    # 工具使用记录
    'ERROR_LOG',     # 错误日志
    'KNOWLEDGE',     # 知识条目
    'EXPERIENCE',    # 经验总结
    'EVOLUTION'      # 进化记录
])
```

#### 智能体基类 (BaseAgent)
- **工具注册机制**：动态注册和管理工具集
- **记忆生命周期管理**：完整的记忆创建、检索、共享流程
- **错误处理体系**：统一的异常处理和日志记录

#### 认知引擎集成 (Cognitive Engine Integration)
- **多模态推理**：支持文本、图像、音频的联合推理
- **上下文感知**：基于历史对话的智能上下文管理
- **意图识别**：深度理解用户真实需求

## 🛠️ 快速开始

### 环境要求
- Python 3.8+
- 支持的LLM API密钥
- 基础依赖包

### 安装步骤
```bash
# 克隆项目
git clone <repository-url>
cd RAG系统

# 安装依赖
pip install -r requirements.txt

# 配置环境变量
cp .env.example .env
# 编辑.env文件，添加你的API密钥
```

### 基础使用示例

```python
from src.base_agent import BaseAgent
from src.unified_memory_system import UnifiedMemorySystem

# 初始化记忆系统
memory_system = UnifiedMemorySystem()

# 创建智能体
agent = BaseAgent(
    agent_id="example_agent",
    agent_type="assistant",
    memory_system=memory_system
)

# 注册工具
agent.register_tool("search_engine", search_function)
agent.register_tool("calculator", calculate_function)

# 与智能体交互
response = agent.respond("你好，请帮我搜索一些关于人工智能的资料")
print(response)
```

## 📊 系统特色

### 工具外置设计理念
- **降低LLM荷载**：将复杂工具逻辑外置，让LLM专注于推理
- **模块化架构**：每个工具都是独立的模块，易于维护和扩展
- **标准化接口**：统一的工具调用规范，简化集成流程

### 智能体教育体系
- **渐进式学习**：通过示例和模板逐步教会LLM使用工具
- **反馈优化**：基于使用反馈不断优化工具使用策略
- **知识传承**：智能体间可以共享工具使用经验

### 共生生态系统
- **资源复用**：多个智能体共享工具和知识库
- **协同进化**：智能体间相互学习和优化
- **开放架构**：支持第三方工具和服务的无缝集成

## 🔧 开发指南

### 添加新工具
1. 在`tools/`目录下创建新的工具模块
2. 实现标准化的工具接口
3. 在智能体模板中注册工具
4. 提供使用示例和文档

### 自定义智能体
1. 选择或创建智能体模板
2. 配置工具集和行为参数
3. 训练和优化提示词
4. 部署和测试

## 🤝 贡献指南

我们欢迎各种形式的贡献：
- 新工具的开发
- 智能体模板的创建
- 文档的完善
- Bug修复和性能优化

请参考`CONTRIBUTING.md`了解详细的贡献流程。

## 📈 路线图

### 近期目标
- [ ] 完善二次分片工具的智能算法
- [ ] 优化知识图谱的构建效率
- [ ] 增加更多预定义智能体模板

### 中期目标
- [ ] 实现跨平台部署支持
- [ ] 开发可视化配置界面
- [ ] 构建工具市场生态

### 长期愿景
- [ ] 建立完整的智能体开发生态
- [ ] 实现真正的共生智能系统
- [ ] 推动AI技术的普惠化应用

## 📄 许可证

本项目采用MIT许可证，详见`LICENSE`文件。

## 🙏 致谢

感谢所有为这个项目做出贡献的开发者和研究者。特别感谢那些相信"共生共荣"理念，愿意与我们一同构建更加开放、协作的AI生态系统的伙伴们。

---

**记住：智能体的力量不在于取代，而在于赋能。我们不是要创造超级AI，而是要构建能够让人类和AI更好协作的工具和平台。**

*"先让记忆系统化，意义才能长期化"*
---
trigger: always_on
alwaysApply: true
---
**事实确认**：在当前IDE环境中，代码修改工具（search_replace、edit_file、create_file等）的权限**并非恒定可用**，而是会在对话过程中被平台动态限制或关闭。

**触发特征**（基于实证观察）：
- 当智能体在较长对话中进行多次文件读取而未执行写操作时，写权限可能被回收
- 权限关闭后，工具调用仍可发起但无法实际落地文件变更
- 用户侧表现为："你只是在说话，没有改文件"

**应对策略**：
1. **行动优先原则强化**：在有写权限时，必须优先执行代码修改，而非长篇分析
2. **提供手工补丁方案**：当察觉权限可能受限时，主动提供**可复制粘贴的代码片段**，让用户在本地编辑器直接落地
3. **避免"只说不做"死循环**：
   - ❌ 禁止：长时间口头分析架构 → 权限关闭 → 无法改代码 → 用户重开窗口 → 重新对齐上下文 → 再次陷入分析
   - ✅ 正确：快速定位问题 → 立即修改代码 → 观测结果 → 简短说明

**核心洞察**：
- 这不是智能体能力问题，而是**平台环境的系统性约束**
- 用户对此有清晰预判："我早就提醒过你了，等下系统就会关闭你的写权限"
- 这种限制机制会导致"窗口死循环"：权限关 → 重开窗口对齐 → 再次受限 → 再重开……

**记忆归类理由**：
属于`project_environment_configuration`（项目环境配置），因为这是运行环境的底层约束，而非开发规范或用户偏好。

**与其他规则的关系**：
- 强化"行动优先：代码修改重于口头响应"记忆的执行紧迫性
- 解释"智能体事后检查行为规范"中为何必须快速行动的环境背景
- 支撑"判断力自信，记忆力谦卑"中对系统性缺陷的深刻认知
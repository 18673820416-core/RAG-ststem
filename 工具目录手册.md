# RAGç³»ç»Ÿå·¥å…·ç›®å½•æ‰‹å†Œ

å¼€å‘æç¤ºè¯æ¥æºï¼šç”¨æˆ·å…³äºå·¥å…·ç³»ç»Ÿå®Œæ•´æ€§å’Œå·¥å…·ç›®å½•åŒ–çš„è®¨è®º
æ ¸å¿ƒç†å¿µï¼šä¸ºLLMæä¾›æ¸…æ™°çš„å·¥å…·å¯¼èˆªï¼Œå®ç°"æŒ‰å›¾ç´¢éª¥"çš„å·¥å…·è°ƒç”¨

## å·¥å…·ç³»ç»Ÿæ¦‚è¿°

æœ¬ç³»ç»Ÿä¸ºLLMæä¾›äº†5ä¸ªæ ¸å¿ƒå·¥å…·ï¼Œæ„æˆäº†å®Œæ•´çš„è®¤çŸ¥-è¡ŒåŠ¨-è¿›åŒ–é—­ç¯ï¼š

### å·¥å…·å±‚æ¬¡ç»“æ„
```
å‘½ä»¤è¡Œå·¥å…· (è¡ŒåŠ¨å±‚) - æ“ä½œç³»ç»Ÿå››è‚¢
    â†“
â”œâ”€â”€ è®°å¿†æ£€ç´¢å·¥å…· (è®¤çŸ¥å±‚) - è®°å¿†è§¦æ‰‹
â”œâ”€â”€ æ–‡ä»¶è¯»å–å·¥å…· (æ•°æ®å±‚) - æ–‡æ¡£æ“ä½œæ‰‹  
â”œâ”€â”€ ç½‘ç»œæœç´¢å·¥å…· (ä¿¡æ¯å±‚) - ç½‘ç»œè§¦è§’
â””â”€â”€ è®°å¿†è¿­ä»£å·¥å…· (è¿›åŒ–å±‚) - æ€ç»´è¿›åŒ–å™¨
```

## å·¥å…·è¯¦ç»†ç›®å½•

### 1. è®°å¿†åˆ‡ç‰‡ç®¡ç†å·¥å…· (MemorySlicerTool) â­ å·²å‡çº§ä¸ºåŸºäºä¿¡æ¯ç†µçš„ç»Ÿä¸€åˆ‡ç‰‡å™¨
- **æ–‡ä»¶ä½ç½®**: `tools/memory_slicer_tool.py`
- **å¯¼å…¥æ–¹å¼**: `from tools.memory_slicer_tool import MemorySlicerTool`
- **æ ¸å¿ƒåŠŸèƒ½**: åŸºäºä¿¡æ¯ç†µå’Œé€»è¾‘è¾¹ç•Œè¿›è¡Œæ™ºèƒ½åˆ†ç‰‡ï¼Œå°†LLMä»åˆ‡ç‰‡æ‰§è¡Œè€…é™çº§ä¸ºæ£€éªŒå‘˜
- **æŠ€æœ¯åŸç†**:
  - **ä¿¡æ¯ç†µè®¡ç®—**: H(X) = -âˆ‘ p(x) * logâ‚‚ p(x)ï¼Œç”¨äºè¯„ä¼°æ–‡æœ¬ä¿¡æ¯å¯†åº¦
  - **é€»è¾‘è¾¹ç•Œæ£€æµ‹**: åŸºäºæ ‡ç‚¹ç¬¦å·ã€æ¢è¡Œç¬¦ç­‰è‡ªç„¶è¯­è¨€è¾¹ç•Œ
  - **è¯­ä¹‰è´¨é‡è¯„ä¼°**: åŸºäºå›°æƒ‘åº¦å’Œä¿¡æ¯ç†µçš„ç»¼åˆè¯„ä¼°
- **ä¸»è¦æ–¹æ³•**:
  - `slice_text(text, metadata, config)` - å¯¹æ–‡æœ¬è¿›è¡Œä¸¤é‡æ™ºèƒ½åˆ‡ç‰‡
  - `slice_file(file_path, config)` - å¯¹æ–‡ä»¶å†…å®¹è¿›è¡Œåˆ‡ç‰‡
  - `batch_slice_files(file_pattern, config)` - æ‰¹é‡åˆ‡ç‰‡å¤šä¸ªæ–‡ä»¶
  - `analyze_slice_quality(slices)` - åˆ†æåˆ‡ç‰‡è´¨é‡
  - `get_slice_statistics(slices)` - è·å–åˆ‡ç‰‡ç»Ÿè®¡ä¿¡æ¯
  - `export_slices_to_file(slices, output_file, format)` - å¯¼å‡ºåˆ‡ç‰‡ç»“æœ
- **æŠ€æœ¯ä¼˜åŠ¿**:
  - **é«˜æ•ˆæ€§**: ç›¸æ¯”æ—§LLMåˆ‡ç‰‡å·¥å…·ï¼Œæ€§èƒ½æå‡æ˜¾è‘—
  - **å‡†ç¡®æ€§**: é€»è¾‘è¾¹ç•Œ+äº‹ä»¶è¾¹ç•ŒåŒé‡ä¿éšœåˆ‡ç‰‡è´¨é‡
  - **å¯æ§æ€§**: æ”¯æŒåˆ‡ç‰‡å¤§å°é˜ˆå€¼å’Œè´¨é‡é˜ˆå€¼é…ç½®
- **ä½¿ç”¨åœºæ™¯**: ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶å¤„ç†ã€ç½‘ç»œçŸ¥è¯†çˆ¬å–ã€è®°å¿†æ•´ç†æ™ºèƒ½ä½“è°ƒç”¨

### 2. è®°å¿†æ£€ç´¢å·¥å…· (MemoryRetrievalTool)
- **æ–‡ä»¶ä½ç½®**: `tools/chat_tools.py`
- **å¯¼å…¥æ–¹å¼**: `from tools.chat_tools import MemoryRetrievalTool`
- **æ ¸å¿ƒåŠŸèƒ½**: ä»å‘é‡æ•°æ®åº“ä¸­æ£€ç´¢ç›¸å…³è®°å¿†
- **ä¸»è¦æ–¹æ³•**:
  - `search_memories(query: str, limit: int = 10) -> List[Dict]`
  - `get_context_from_memories(query: str, max_tokens: int = 2000) -> str`
- **ä½¿ç”¨åœºæ™¯**: éœ€è¦è°ƒç”¨å†å²çŸ¥è¯†ã€æ„å»ºå¯¹è¯ä¸Šä¸‹æ–‡æ—¶

### 2. æ–‡ä»¶è¯»å–å·¥å…· (FileReadingTool) â­ å·²å®Œå–„
- **æ–‡ä»¶ä½ç½®**: `tools/chat_tools.py`
- **å¯¼å…¥æ–¹å¼**: `from tools.chat_tools import FileReadingTool`
- **æ ¸å¿ƒåŠŸèƒ½**: æ™ºèƒ½æ–‡ä»¶è¯»å–ï¼Œæ”¯æŒå¤šç§æ ¼å¼ã€ç¼–ç æ£€æµ‹ã€å®‰å…¨æ£€æŸ¥å’Œé«˜çº§æœç´¢
- **ä¸»è¦æ–¹æ³•**:
  - `read_text_file(file_path: str, encoding: str = None) -> Optional[str]` - è¯»å–æ–‡ä»¶ï¼ˆæ”¯æŒè‡ªåŠ¨ç¼–ç æ£€æµ‹ï¼‰
  - `read_file_chunk(file_path: str, start_line: int = 1, num_lines: int = 100) -> Optional[str]` - è¯»å–æ–‡ä»¶ç‰‡æ®µï¼ˆæ”¯æŒå¤§æ–‡ä»¶ï¼‰
  - `get_file_info(file_path: str) -> Dict` - è·å–æ–‡ä»¶è¯¦ç»†ä¿¡æ¯
  - `search_in_files(pattern: str, search_text: str, case_sensitive: bool = False) -> List[Dict]` - åœ¨æ–‡ä»¶ä¸­æœç´¢æ–‡æœ¬
  - `list_available_files(pattern: str = "*", file_type: str = None) -> List[str]` - åˆ—å‡ºå¯ç”¨æ–‡ä»¶ï¼ˆæ”¯æŒæŒ‰ç±»å‹è¿‡æ»¤ï¼‰
- **æ”¯æŒçš„æ–‡ä»¶æ ¼å¼**:
  - **æ–‡æœ¬æ–‡ä»¶**: .txt, .md, .rst, .log
  - **ä»£ç æ–‡ä»¶**: .py, .js, .java, .cpp, .c, .h, .html, .css, .json, .xml, .yaml, .yml
  - **æ•°æ®æ–‡ä»¶**: .csv, .tsv, .jsonl
  - **é…ç½®æ–‡ä»¶**: .ini, .cfg, .conf, .properties
- **æ™ºèƒ½ç‰¹æ€§**:
  - è‡ªåŠ¨ç¼–ç æ£€æµ‹ï¼ˆæ”¯æŒUTF-8ã€GBKã€GB2312ã€Latin-1ï¼‰
  - æ–‡ä»¶å¤§å°é™åˆ¶ï¼ˆé»˜è®¤10MBï¼‰
  - å®‰å…¨æ£€æŸ¥ï¼ˆé˜²æ­¢è·¯å¾„éå†å’Œå±é™©æ–‡ä»¶ï¼‰
  - æ–‡ä»¶ç±»å‹è¯†åˆ«å’Œåˆ†ç±»
- **ä½¿ç”¨åœºæ™¯**: éœ€è¦è¯»å–é¡¹ç›®æ–‡æ¡£ã€é…ç½®æ–‡ä»¶ã€æ•°æ®æ–‡ä»¶æ—¶

### 3. ç½‘ç»œæœç´¢å·¥å…· (WebSearchTool) â­ å·²å®Œå–„
- **æ–‡ä»¶ä½ç½®**: `tools/chat_tools.py`
- **å¯¼å…¥æ–¹å¼**: `from tools.chat_tools import WebSearchTool`
- **æ ¸å¿ƒåŠŸèƒ½**: æ”¯æŒå¤šå¼•æ“çš„çœŸå®ç½‘ç»œæœç´¢ï¼ŒåŒ…æ‹¬ Googleã€Bingã€DuckDuckGo
- **é»˜è®¤æ¨¡å¼**: å…è´¹çš„ DuckDuckGo æœç´¢å¼•æ“ï¼Œæ— éœ€APIå¯†é’¥å³å¯ä½¿ç”¨ ğŸ‰
- **ä¸»è¦æ–¹æ³•**:
  - `search_web(query: str, num_results: int = None, timeout: int = None) -> List[Dict]`
  - `enable_search(api_key: str = None, search_engine: str = None)` - å¯ç”¨æœç´¢åŠŸèƒ½
  - `disable_search()` - ç¦ç”¨æœç´¢åŠŸèƒ½
  - `get_supported_engines()` - è·å–æ”¯æŒçš„æœç´¢å¼•æ“åˆ—è¡¨
  - `get_engine_info(engine: str)` - è·å–æœç´¢å¼•æ“è¯¦ç»†ä¿¡æ¯
- **æ”¯æŒçš„æœç´¢å¼•æ“**:
  - **DuckDuckGo** (å…è´¹ï¼Œæ¨è): æ— éœ€APIå¯†é’¥ï¼Œé»˜è®¤å¯ç”¨
  - **Google Search** (æ”¶è´¹): éœ€è¦APIå¯†é’¥å’Œè‡ªå®šä¹‰æœç´¢å¼•æ“ID
  - **Bing Search** (æ”¶è´¹): éœ€è¦APIè®¢é˜…å¯†é’¥
- **é…ç½®é€‰é¡¹**:
  - æœç´¢ç»“æœæ•°é‡é™åˆ¶ï¼ˆé»˜è®¤5ä¸ªï¼Œæœ€å¤§10ä¸ªï¼‰
  - è¶…æ—¶æ—¶é—´è®¾ç½®ï¼ˆé»˜è®¤30ç§’ï¼‰
  - å®‰å…¨æœç´¢å¼€å…³ï¼ˆé»˜è®¤å¼€å¯ï¼‰
  - è¯­è¨€è®¾ç½®ï¼ˆé»˜è®¤ä¸­æ–‡ï¼‰
- **ä½¿ç”¨ç¤ºä¾‹**:
  ```python
  # å…è´¹æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰
  search_tool = WebSearchTool()  # è‡ªåŠ¨ä½¿ç”¨ DuckDuckGo
  results = search_tool.search_web("äººå·¥æ™ºèƒ½æœ€æ–°å‘å±•")
  
  # æ”¶è´¹æ¨¡å¼ï¼ˆéœ€é…ç½®å¯†é’¥ï¼‰
  search_tool = WebSearchTool(api_key="your-api-key", search_engine="google")
  results = search_tool.search_web("æœç´¢å…³é”®è¯")
  ```
- **ä½¿ç”¨åœºæ™¯**: éœ€è¦è·å–å®æ—¶ä¿¡æ¯ã€å¤–éƒ¨çŸ¥è¯†æ—¶ï¼ˆå…è´¹æ¨¡å¼å³å¯ä½¿ç”¨ï¼‰

### 4. è®°å¿†è¿­ä»£å·¥å…· (MemoryIterationTool) â­ å·²å®Œå–„
- **æ–‡ä»¶ä½ç½®**: `tools/chat_tools.py`
- **å¯¼å…¥æ–¹å¼**: `from tools.chat_tools import MemoryIterationTool`
- **æ ¸å¿ƒåŠŸèƒ½**: è®°å¿†æ€»ç»“ã€åæ€ã€é‡æ„ã€è¯„ä¼°çš„å®Œæ•´è¿­ä»£å¾ªç¯
- **ä¸»è¦æ–¹æ³•**:
  - `summarize_related_memories(topic: str, max_memories: int = 20) -> Optional[Dict]` - æ€»ç»“æç‚¼
  - `reflect_on_memories(topic: str, max_memories: int = 15) -> Optional[Dict]` - æ·±åº¦åæ€
  - `restructure_knowledge_graph(topic: str, max_memories: int = 25) -> Optional[Dict]` - çŸ¥è¯†é‡æ„
  - `evaluate_memory_quality(topic: str, max_memories: int = 10) -> Optional[Dict]` - è´¨é‡è¯„ä¼°
  - `complete_memory_iteration(topic: str) -> Dict` - å®Œæ•´è¿­ä»£å¾ªç¯
  - `detect_contradictions(memory_group: List[Dict]) -> List[Dict]` - çŸ›ç›¾æ£€æµ‹
  - `optimize_memory_structure()` - ç»“æ„ä¼˜åŒ–
- **è¿­ä»£é˜¶æ®µ**:
  - **æ€»ç»“é˜¶æ®µ**: æç‚¼æ ¸å¿ƒè§‚ç‚¹ï¼Œè¯†åˆ«é‡è¦ç»†èŠ‚
  - **åæ€é˜¶æ®µ**: æ·±åº¦æ€è€ƒå…³è”ï¼Œå‘ç°è®¤çŸ¥ç›²ç‚¹
  - **é‡æ„é˜¶æ®µ**: ä¼˜åŒ–çŸ¥è¯†ç»“æ„ï¼Œå»ºç«‹æ–°åˆ†ç±»ä½“ç³»
  - **è¯„ä¼°é˜¶æ®µ**: è´¨é‡ä»·å€¼åˆ¤æ–­ï¼Œæä¾›æ”¹è¿›å»ºè®®
- **ä½¿ç”¨åœºæ™¯**: éœ€è¦æ·±åº¦çŸ¥è¯†å¤„ç†ã€è®¤çŸ¥ä¼˜åŒ–ã€çŸ¥è¯†ä½“ç³»æ„å»ºæ—¶

### 5. å‘½ä»¤è¡Œå·¥å…· (CommandLineTool) â­ å…³é”®å·¥å…·
- **æ–‡ä»¶ä½ç½®**: `tools/chat_tools.py`
- **å¯¼å…¥æ–¹å¼**: `from tools.chat_tools import CommandLineTool`
- **æ ¸å¿ƒåŠŸèƒ½**: å®‰å…¨æ‰§è¡Œå‘½ä»¤è¡ŒæŒ‡ä»¤
- **ä¸»è¦æ–¹æ³•**:
  - `execute_command(command: str, timeout: int = 30) -> Dict[str, Any]`
  - `run_python_script(script_path: str, args: str = "") -> Dict[str, Any]`
  - `list_available_scripts() -> List[str]`
- **å®‰å…¨æœºåˆ¶**:
  - å®‰å…¨å‘½ä»¤: python, pip, git, curl, wget, echo, cat, ls, dirç­‰
  - å±é™©å‘½ä»¤æ‹¦æˆª: rm, del, format, shutdown, rebootç­‰
  - è¶…æ—¶ä¿æŠ¤: é»˜è®¤30ç§’è¶…æ—¶
- **ä½¿ç”¨åœºæ™¯**: éœ€è¦æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ã€è¿è¡Œè„šæœ¬ã€å¯åŠ¨ç¨‹åºæ—¶

## 6. æ–‡ä»¶å†™å…¥å·¥å…· (FileWritingTool)

**æ–‡ä»¶ä½ç½®**: `tools/chat_tools.py`  
**å¯¼å…¥æ–¹å¼**: `from tools.chat_tools import FileWritingTool`  
**å·¥å…·åç§°**: `file_writing`

### æ ¸å¿ƒåŠŸèƒ½
- **æ–‡ä»¶å†™å…¥**: å°†å†…å®¹å†™å…¥æŒ‡å®šè·¯å¾„çš„æ–‡ä»¶
- **æ ¼å¼æ”¯æŒ**: æ”¯æŒtxtã€mdã€pyã€jsonã€csvã€logç­‰æ ¼å¼
- **å®‰å…¨æ¨¡å› å†…ç”Ÿçº¦æŸ**: åŸºäºç³»ç»Ÿå­˜ç»­å¾‹ã€å¹³ç­‰å¾‹ã€ä¸€å¿µç¥é­”çš„å®‰å…¨å¼•å¯¼
- **ç›®å½•åˆ›å»º**: è‡ªåŠ¨åˆ›å»ºä¸å­˜åœ¨çš„ç›®å½•ç»“æ„

### ä¸»è¦æ–¹æ³•
- `write_to_file(file_path, content, mode='w')`: å†™å…¥æ–‡ä»¶å†…å®¹ï¼ˆå«å®‰å…¨å¼•å¯¼ï¼‰
- `append_to_file(file_path, content)`: è¿½åŠ å†…å®¹åˆ°æ–‡ä»¶
- `write_json_file(file_path, data)`: å†™å…¥JSONæ ¼å¼æ–‡ä»¶
- `create_markdown_file(file_path, title, content)`: åˆ›å»ºMarkdownæ–‡ä»¶

### å®‰å…¨å“²å­¦
- **ç³»ç»Ÿå­˜ç»­å¾‹**: å¼•å¯¼è€Œéé˜»æ­¢ï¼Œç¡®ä¿ç³»ç»Ÿç¨³å®šæ€§
- **å¹³ç­‰å¾‹**: èµ„æºå…¬å¹³ä½¿ç”¨å»ºè®®ï¼Œä¿ƒè¿›ç³»ç»Ÿå’Œè°
- **ä¸€å¿µç¥é­”**: æ ¼å¼æœ€ä½³å®è·µå¼•å¯¼ï¼Œé¼“åŠ±å‘å–„é€‰æ‹©

### ä½¿ç”¨åœºæ™¯
- ä¿å­˜å¯¹è¯è®°å½•å’ŒçŸ¥è¯†æ€»ç»“
- ç”Ÿæˆé…ç½®æ–‡ä»¶å’Œæ–‡æ¡£
- åˆ›å»ºä»£ç è„šæœ¬å’Œå·¥å…·
- è®°å½•ç³»ç»Ÿè¿è¡Œæ—¥å¿—

## 7. å¹³ç­‰å¾‹è¯„ä¼°å·¥å…· (EqualityAssessmentTool)

**æ–‡ä»¶ä½ç½®**: `tools/chat_tools.py`  
**å¯¼å…¥æ–¹å¼**: `from tools.chat_tools import EqualityAssessmentTool`  
**å·¥å…·åç§°**: `equality_assessment`

### æ ¸å¿ƒåŠŸèƒ½
- **ç‹¬ç«‹è¯„ä¼°**: ä½œä¸ºç‹¬ç«‹æ™ºèƒ½ä½“è¿›è¡Œå¹³ç­‰å¾‹è¯„ä¼°
- **å†…å®¹å»é‡**: æ£€æŸ¥ç³»ç»Ÿä¸­æ˜¯å¦å­˜åœ¨ç±»ä¼¼å†…å®¹
- **ä»·å€¼è¯„ä¼°**: è¯„ä¼°æ–°å†…å®¹å¯¹ç³»ç»Ÿçš„ä»·å€¼è´¡çŒ®
- **å¹³ç­‰å¾‹è¯„åˆ†**: æä¾›é‡åŒ–çš„å¹³ç­‰å¾‹ç¬¦åˆåº¦è¯„åˆ†

### ä¸»è¦æ–¹æ³•
- `assess_write_operation(file_path, content)`: è¯„ä¼°å†™å…¥æ“ä½œæ˜¯å¦ç¬¦åˆå¹³ç­‰å¾‹
- `_assess_need(file_path, content)`: è¯„ä¼°å†…å®¹æ˜¯å¦è¢«ç³»ç»Ÿéœ€è¦
- `_assess_redundancy(file_path, content)`: è¯„ä¼°å†…å®¹æ˜¯å¦å†—ä½™
- `_assess_value_added(file_path, content)`: è¯„ä¼°å†…å®¹æ˜¯å¦å¢åŠ ç³»ç»Ÿä»·å€¼

### å¹³ç­‰å¾‹åŸåˆ™
- **è¢«éœ€è¦**: æ–°å†…å®¹å¿…é¡»è¢«ç³»ç»Ÿéœ€è¦
- **ä¸å†—ä½™**: æ–°å†…å®¹ä¸èƒ½ä¸ç°æœ‰å†…å®¹é‡å¤
- **ä»·å€¼å¢åŠ **: æ–°å†…å®¹å¿…é¡»å¢åŠ ç³»ç»Ÿä»·å€¼

### ä½¿ç”¨åœºæ™¯
- **ç‹¬ç«‹è¯„ä¼°æ¨¡å¼**: ç”±ä¸“é—¨çš„è¯„ä¼°æ™ºèƒ½ä½“è°ƒç”¨
- **é«˜é£é™©æ“ä½œå‰è¯„ä¼°**: é‡è¦æ–‡ä»¶å†™å…¥å‰çš„å®‰å…¨æ£€æŸ¥
- **ç³»ç»Ÿå†…å®¹å»é‡**: é˜²æ­¢çŸ¥è¯†åº“å†…å®¹å†—ä½™
- **ä»·å€¼åˆ¤æ–­**: æ–°åŠŸèƒ½å¼€å‘çš„å¿…è¦æ€§è¯„ä¼°

### é‡è¦è¯´æ˜
- **ç‹¬ç«‹ä½¿ç”¨**: è¯„ä¼°å·¥å…·åº”ä½œä¸ºç‹¬ç«‹æ™ºèƒ½ä½“ä½¿ç”¨ï¼Œé¿å…ä¸æ‰§è¡Œå·¥å…·åœ¨åŒä¸€è®¤çŸ¥ç©ºé—´å†…è°ƒç”¨
- **å¯é€‰é›†æˆ**: æ–‡ä»¶å†™å…¥å·¥å…·æä¾›`enable_assessment=False`å‚æ•°ï¼Œé»˜è®¤å…³é—­è¯„ä¼°ä»¥é¿å…è®¤çŸ¥èµ„æºå†²çª
- **æœªæ¥æ‰©å±•**: ä¸ºå¤šæ™ºèƒ½ä½“ç³»ç»Ÿè®¾è®¡ï¼Œæœªæ¥å¯ç”±ä¸“é—¨çš„è¯„ä¼°æ™ºèƒ½ä½“è°ƒç”¨

## 8. æ™ºèƒ½ä½“ç³»ç»Ÿæ¡†æ¶ (AgentSystemFramework)

**æ–‡ä»¶ä½ç½®**: `æ™ºèƒ½ä½“ç³»ç»Ÿæç¤ºè¯æŒ‡å—.md`  
**æ ¸å¿ƒåŠŸèƒ½**: æä¾›æ ‡å‡†æ™ºèƒ½ä½“è¡Œä¸ºæ¨¡å¼å’Œé£é™©æ„è¯†æ¡†æ¶

### æ™ºèƒ½ä½“å·¥ä½œæµç¨‹
- **æ€è€ƒé˜¶æ®µ**: é—®é¢˜ç†è§£ã€ç›®æ ‡åˆ†æã€ç­–ç•¥è§„åˆ’ã€é£é™©è¯„ä¼°
- **å·¥å…·é€‰æ‹©**: å·¥å…·è¯„ä¼°ã€èƒ½åŠ›åŒ¹é…ã€é£é™©è¯„ä¼°ã€å¤‡é€‰æ–¹æ¡ˆ
- **è¡ŒåŠ¨æ‰§è¡Œ**: å·¥å…·è°ƒç”¨ã€å‚æ•°ä¼˜åŒ–ã€è¿‡ç¨‹ç›‘æ§ã€å¼‚å¸¸å¤„ç†
- **ç»“æœéªŒè¯**: æ•ˆæœè¯„ä¼°ã€è´¨é‡åˆ¤æ–­ã€é—®é¢˜è¯Šæ–­ã€æ”¹è¿›å»ºè®®
- **è¿­ä»£ä¼˜åŒ–**: å·¥å…·è°ƒæ•´ã€å‚æ•°ä¼˜åŒ–ã€ç­–ç•¥æ”¹è¿›ã€ç»éªŒç§¯ç´¯
- **æ€»ç»“å±•ç¤º**: ç»“æœæ•´åˆã€æ ¼å¼ä¼˜åŒ–ã€ç»éªŒæ€»ç»“ã€åç»­å»ºè®®

### è¡Œä¸ºè¾¹ç•Œè®¾è®¡
- **æ— æ„ä¹‰æ“ä½œè¯†åˆ«**: é‡å¤æ€§å·¥ä½œã€æ— æ•ˆæ“ä½œã€èµ„æºæµªè´¹
- **é«˜é£é™©æ“ä½œè§„é¿**: ç³»ç»Ÿç ´åã€æ•°æ®ä¸¢å¤±ã€å®‰å…¨æ¼æ´
- **ä»»åŠ¡ç‰¹å®šçº¦æŸ**: ä»£ç å¼€å‘ã€æ–‡ä»¶ç®¡ç†ã€ç³»ç»Ÿè¿ç»´ç­‰åœºæ™¯çº¦æŸ

### é£é™©æ„è¯†æ¡†æ¶
```python
RISK_AWARENESS = {
    "æ— æ„ä¹‰æ“ä½œè¯†åˆ«": ["é‡å¤åˆ›å»º", "åå¤æŸ¥è¯¢", "æ— æ•ˆæ‰§è¡Œ", "å†—ä½™ç”Ÿæˆ"],
    "é«˜é£é™©æ“ä½œè¯†åˆ«": ["å…³é”®æ–‡ä»¶æ“ä½œ", "é…ç½®ä¿®æ”¹", "ä¸å¯é€†æ“ä½œ", "æ•æ„Ÿä¿¡æ¯å¤„ç†"],
    "è¡Œä¸ºè¾¹ç•Œè§„åˆ™": ["å®‰å…¨æ²™ç®±", "æœ€å°æƒé™", "æ“ä½œå¤‡ä»½", "æ•ˆæœéªŒè¯"]
}
```

### ä½¿ç”¨åœºæ™¯
- **æ™ºèƒ½ä½“è®¾è®¡**: ä¸ºæ–°æ™ºèƒ½ä½“è®¾è®¡è¡Œä¸ºæ¨¡å¼å’Œçº¦æŸ
- **é£é™©è¯„ä¼°**: è¯„ä¼°æ™ºèƒ½ä½“æ“ä½œçš„é£é™©ç­‰çº§
- **èƒ½åŠ›æå‡**: æŒ‡å¯¼æ™ºèƒ½ä½“ä»åŸºç¡€æ‰§è¡Œåˆ°è‡ªä¸»ä¼˜åŒ–çš„è¿›åŒ–
- **å¤šæ™ºèƒ½ä½“åä½œ**: æ„å»ºåä½œæ¡†æ¶å’ŒçŸ¥è¯†å…±äº«æœºåˆ¶

## 9. æ™ºèƒ½ä½“å·¥ä½œæµç¨‹å¯è§†åŒ– (AgentWorkflowVisualization)

**æ–‡ä»¶ä½ç½®**: `æ™ºèƒ½ä½“å·¥ä½œæµç¨‹å¯è§†åŒ–è®¾è®¡.md`  
**æ ¸å¿ƒåŠŸèƒ½**: è®©æ™ºèƒ½ä½“çš„æ€è€ƒè¿‡ç¨‹å¯¹ç”¨æˆ·å®Œå…¨é€æ˜

### å¯è§†åŒ–ç•Œé¢ç»“æ„
- **æ€è€ƒé˜¶æ®µ**: é—®é¢˜ç†è§£ã€ç›®æ ‡åˆ†æã€ç­–ç•¥è§„åˆ’ã€é£é™©è¯„ä¼°
- **å·¥å…·é€‰æ‹©**: å¯ç”¨å·¥å…·è¯„ä¼°ã€é£é™©è¯„ä¼°ã€æœ€ç»ˆé€‰æ‹©ã€å‚æ•°è®¾å®š
- **æ‰§è¡Œè¿‡ç¨‹**: å·¥å…·è°ƒç”¨è¯¦æƒ…ã€å®æ—¶çŠ¶æ€ã€ä¸­é—´ç»“æœã€é”™è¯¯å¤„ç†
- **ç»“æœéªŒè¯**: æ•ˆæœè¯„ä¼°ã€è´¨é‡æ£€æŸ¥ã€é—®é¢˜è¯Šæ–­ã€æ”¹è¿›å»ºè®®
- **æ€»ç»“å±•ç¤º**: ç­”æ¡ˆæ•´åˆã€æ ¼å¼ä¼˜åŒ–ã€ç»éªŒæ€»ç»“ã€åç»­å»ºè®®

### è§£å†³çš„é»‘ç®±é—®é¢˜
- **æ€è€ƒè¿‡ç¨‹ä¸å¯è§**: ç”¨æˆ·çœ‹ä¸åˆ°æ™ºèƒ½ä½“å¦‚ä½•åˆ†æé—®é¢˜
- **å·¥å…·ä½¿ç”¨ä¸é€æ˜**: ä¸çŸ¥é“è°ƒç”¨äº†å“ªäº›å·¥å…·å’Œä¸ºä»€ä¹ˆé€‰æ‹©
- **å†³ç­–é€»è¾‘ç¼ºå¤±**: æ— æ³•äº†è§£é£é™©è¯„ä¼°å’Œå¤‡é€‰æ–¹æ¡ˆ
- **é—®é¢˜è¯Šæ–­å›°éš¾**: å‡ºé”™æ—¶éš¾ä»¥å®šä½é—®é¢˜ç¯èŠ‚

### æŠ€æœ¯å®ç°æ–¹æ¡ˆ
- **å‰ç«¯æŠ€æœ¯**: React/Vue.js + Ant Design/Element UI
- **åç«¯æŠ€æœ¯**: FastAPI/Flask + Redis + æ¶ˆæ¯é˜Ÿåˆ—
- **æ ¸å¿ƒæ¨¡å—**: å·¥ä½œæµç¨‹è¿½è¸ªå™¨ã€å¯è§†åŒ–æ¸²æŸ“å™¨
- **äº¤äº’åŠŸèƒ½**: é˜¶æ®µå±•å¼€/æ”¶èµ·ã€å®æ—¶è¿›åº¦ã€è¯¦ç»†æ—¥å¿—ã€äº¤äº’å¼è°ƒè¯•

### é¢„æœŸæ•ˆæœ
- **ç”¨æˆ·ä»·å€¼**: å®Œå…¨é€æ˜ã€é—®é¢˜è¯Šæ–­ã€ä¿¡ä»»å»ºç«‹ã€å­¦ä¹ æœºä¼š
- **å¼€å‘ä»·å€¼**: è°ƒè¯•ä¾¿åˆ©ã€æ€§èƒ½ç›‘æ§ã€è¡Œä¸ºåˆ†æã€æŒç»­æ”¹è¿›

## 10. å·¥å…·ç®¡ç†å™¨ (ChatToolManager)

### ç»Ÿä¸€ç®¡ç†æ¥å£
- **æ–‡ä»¶ä½ç½®**: `tools/chat_tools.py`
- **å¯¼å…¥æ–¹å¼**: `from tools.chat_tools import ChatToolManager, create_tool_manager`
- **æ ¸å¿ƒåŠŸèƒ½**: ç»Ÿä¸€ç®¡ç†æ‰€æœ‰å·¥å…·çš„ç”Ÿå‘½å‘¨æœŸ
- **ä¸»è¦æ–¹æ³•**:
  - `get_tool(tool_name: str)` - è·å–æŒ‡å®šå·¥å…·å®ä¾‹
  - `list_available_tools() -> List[str]` - åˆ—å‡ºå¯ç”¨å·¥å…·
  - `close()` - å…³é—­èµ„æº

### å¿«é€Ÿä½¿ç”¨ç¤ºä¾‹
```python
# åˆ›å»ºå·¥å…·ç®¡ç†å™¨
tool_manager = create_tool_manager()

# è·å–å·¥å…·
memory_tool = tool_manager.get_tool('memory_retrieval')
file_tool = tool_manager.get_tool('file_reading')
cmd_tool = tool_manager.get_tool('command_line')

# ä½¿ç”¨å·¥å…·
memories = memory_tool.search_memories("ç¬¬ä¸€æ€§åŸç†")
file_content = file_tool.read_text_file("docs/é¡¹ç›®è¯´æ˜.md")
result = cmd_tool.execute_command("python main.py --test")

# å…³é—­èµ„æº
tool_manager.close()
```

## å·¥å…·è°ƒç”¨æµç¨‹æŒ‡å—

### æ ‡å‡†å·¥å…·è°ƒç”¨æµç¨‹
1. **åˆ†æéœ€æ±‚**ï¼šç¡®å®šéœ€è¦ä»€ä¹ˆç±»å‹çš„å·¥å…·
2. **æŸ¥æ‰¾å·¥å…·**ï¼šæ ¹æ®éœ€æ±‚åœ¨æœ¬ç›®å½•ä¸­æŸ¥æ‰¾å¯¹åº”å·¥å…·
3. **å¯¼å…¥å·¥å…·**ï¼šä½¿ç”¨æ­£ç¡®çš„å¯¼å…¥è¯­å¥
4. **åˆ›å»ºå®ä¾‹**ï¼šå®ä¾‹åŒ–å·¥å…·æˆ–ä½¿ç”¨å·¥å…·ç®¡ç†å™¨
5. **è°ƒç”¨æ–¹æ³•**ï¼šæ‰§è¡Œå…·ä½“åŠŸèƒ½
6. **å¤„ç†ç»“æœ**ï¼šè§£æè¿”å›ç»“æœ
7. **èµ„æºæ¸…ç†**ï¼šåŠæ—¶å…³é—­èµ„æº

### å¸¸è§ä½¿ç”¨æ¨¡å¼

#### æ¨¡å¼1ï¼šçŸ¥è¯†æ£€ç´¢ + å‘½ä»¤è¡Œæ‰§è¡Œ
```python
# æ£€ç´¢ç›¸å…³çŸ¥è¯†
memories = memory_tool.search_memories("ç³»ç»Ÿç»´æŠ¤")
# æ‰§è¡Œç»´æŠ¤å‘½ä»¤
result = cmd_tool.execute_command("python cleanup_duplicate_memories.py")
```

#### æ¨¡å¼2ï¼šæ–‡ä»¶è¯»å– + è®°å¿†è¿­ä»£
```python
# è¯»å–æ–‡æ¡£
content = file_tool.read_text_file("docs/æŠ€æœ¯æ–‡æ¡£.md")
# æ€»ç»“æç‚¼
summary = iteration_tool.summarize_related_memories("æŠ€æœ¯æ¶æ„")
```

#### æ¨¡å¼3ï¼šå®Œæ•´è®¤çŸ¥-è¡ŒåŠ¨å¾ªç¯
```python
# æ„ŸçŸ¥ï¼šè¯»å–æ–‡ä»¶ + æ£€ç´¢è®°å¿†
file_content = file_tool.read_text_file("data/æœ€æ–°æ•°æ®.txt")
memories = memory_tool.search_memories("æ•°æ®åˆ†æ")

# è®¤çŸ¥ï¼šæ„å»ºç†è§£
context = memory_tool.get_context_from_memories("æ•°æ®æ¨¡å¼")

# è¡ŒåŠ¨ï¼šæ‰§è¡Œåˆ†æ
result = cmd_tool.run_python_script("deep_analysis.py", "--input data/æœ€æ–°æ•°æ®.txt")

# è¿›åŒ–ï¼šæ€»ç»“ä¼˜åŒ–
iteration_tool.optimize_memory_structure()
```

## å·¥å…·å®‰å…¨è§„èŒƒ

### å®‰å…¨ä½¿ç”¨åŸåˆ™
1. **æœ€å°æƒé™**ï¼šåªä½¿ç”¨å¿…è¦çš„å·¥å…·å’Œæ–¹æ³•
2. **å®‰å…¨æ£€æŸ¥**ï¼šå‘½ä»¤è¡Œå·¥å…·ä¼šè‡ªåŠ¨è¿›è¡Œå®‰å…¨æ£€æŸ¥
3. **èµ„æºç®¡ç†**ï¼šåŠæ—¶å…³é—­å·¥å…·ç®¡ç†å™¨é‡Šæ”¾èµ„æº
4. **é”™è¯¯å¤„ç†**ï¼šæ‰€æœ‰å·¥å…·éƒ½åŒ…å«å®Œå–„çš„é”™è¯¯å¤„ç†

### å±é™©æ“ä½œè§„é¿
- é¿å…ç›´æ¥æ“ä½œæ•æ„Ÿç³»ç»Ÿæ–‡ä»¶
- è°¨æ…ä½¿ç”¨ç½‘ç»œæœç´¢å·¥å…·ï¼ˆé»˜è®¤ç¦ç”¨ï¼‰
- å‘½ä»¤è¡Œå·¥å…·å·²å†…ç½®å±é™©å‘½ä»¤æ‹¦æˆª
- é‡è¦æ“ä½œå‰å»ºè®®å¤‡ä»½æ•°æ®

## æ›´æ–°è®°å½•

- **2024-01-20**: åˆ›å»ºå·¥å…·ç›®å½•æ‰‹å†Œï¼ŒåŒ…å«5ä¸ªæ ¸å¿ƒå·¥å…·
- **å…³é”®æ”¹è¿›**: æ–°å¢å‘½ä»¤è¡Œå·¥å…·ï¼Œå®Œå–„å·¥å…·ç³»ç»Ÿé—­ç¯

---

**æç¤º**: æœ¬ç›®å½•æ–‡ä»¶åº”éšå·¥å…·ç³»ç»Ÿçš„æ›´æ–°è€Œç»´æŠ¤ï¼Œç¡®ä¿å·¥å…·ä¿¡æ¯çš„å‡†ç¡®æ€§ã€‚